<mxfile host="app.diagrams.net" modified="2023-03-22T04:49:07.840Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36" etag="pFg_akQCD9icRWMfkmKD" version="21.0.6" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="954" dy="562" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="xr-hMLC1pA_ehJgamefP-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="xr-hMLC1pA_ehJgamefP-3" target="xr-hMLC1pA_ehJgamefP-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xr-hMLC1pA_ehJgamefP-3" value="1、教育市场添加应用" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="80" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xr-hMLC1pA_ehJgamefP-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="xr-hMLC1pA_ehJgamefP-6" target="xr-hMLC1pA_ehJgamefP-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xr-hMLC1pA_ehJgamefP-6" value="2、数据库添加记录" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="80" y="210" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xr-hMLC1pA_ehJgamefP-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="xr-hMLC1pA_ehJgamefP-8" target="xr-hMLC1pA_ehJgamefP-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xr-hMLC1pA_ehJgamefP-8" value="3、应用安装授权" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="80" y="360" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xr-hMLC1pA_ehJgamefP-10" value="4、应用使用" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="80" y="530" width="120" height="40" as="geometry" />
        </mxCell>
        <UserObject label="1、配置应用基本信息、首页地址&lt;br&gt;&lt;article style=&quot;font-size: 11px;&quot; data-content=&quot;[{&amp;quot;type&amp;quot;:&amp;quot;block&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;2Ufp-1679367261097&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;paragraph&amp;quot;,&amp;quot;data&amp;quot;:{&amp;quot;version&amp;quot;:1},&amp;quot;nodes&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;61CM-1679367261098&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;//1-开发环境&amp;nbsp;&amp;quot;,&amp;quot;marks&amp;quot;:[]}]},{&amp;quot;type&amp;quot;:&amp;quot;inline&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;v21H-1679367261108&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;link&amp;quot;,&amp;quot;data&amp;quot;:{&amp;quot;href&amp;quot;:&amp;quot;https://ep-test.caih.com:8443/ep/app/applogin&amp;quot;},&amp;quot;nodes&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;mA8g-1679367261107&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;https://ep-test.caih.com:8443&amp;quot;,&amp;quot;marks&amp;quot;:[]}]}]},{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;5p2v-1679367261109&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;/ep/app/auth/applogin&amp;quot;,&amp;quot;marks&amp;quot;:[]}]}],&amp;quot;state&amp;quot;:{}},{&amp;quot;type&amp;quot;:&amp;quot;block&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;1j2B-1679367261101&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;paragraph&amp;quot;,&amp;quot;data&amp;quot;:{&amp;quot;version&amp;quot;:1},&amp;quot;nodes&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;AqFT-1679367261102&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;//2-生产环境&amp;nbsp;&amp;quot;,&amp;quot;marks&amp;quot;:[]}]},{&amp;quot;type&amp;quot;:&amp;quot;inline&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;TZOr-1679367261112&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;link&amp;quot;,&amp;quot;data&amp;quot;:{&amp;quot;href&amp;quot;:&amp;quot;https://ep.caih.com//ep/app/applogin&amp;quot;},&amp;quot;nodes&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;o71M-1679367261111&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;https://ep.caih.com//ep/&amp;quot;,&amp;quot;marks&amp;quot;:[]}]}]},{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;UZRS-1679367375498&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;app&amp;quot;,&amp;quot;marks&amp;quot;:[]}]},{&amp;quot;type&amp;quot;:&amp;quot;inline&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;cj1z-1679367375507&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;link&amp;quot;,&amp;quot;data&amp;quot;:{&amp;quot;href&amp;quot;:&amp;quot;https://ep-test.caih.com:8443/ep/app/applogin&amp;quot;},&amp;quot;nodes&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;zekt-1679367375508&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;/auth/applogin&amp;quot;,&amp;quot;marks&amp;quot;:[]}]}]},{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;yVtv-1679367375509&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;marks&amp;quot;:[]}]}],&amp;quot;state&amp;quot;:{}}]&quot;&gt;&lt;div style=&quot;line-height: 1.75; font-size: 11px;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;测试环境 &lt;a style=&quot;text-decoration-line: none; font-size: 11px;&quot; href=&quot;https://ep-test.caih.com:8443/ep/app/applogin&quot;&gt;https://ep-test.caih.com:8443&lt;/a&gt;/ep/app/auth/applogin&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 11px;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;生产环境 &lt;a style=&quot;text-decoration-line: none; font-size: 11px;&quot; href=&quot;https://ep.caih.com//ep/app/applogin&quot;&gt;&lt;span style=&quot;color: rgb(0, 56, 132); font-size: 11px;&quot;&gt;https://ep.caih.com/ep/&lt;/span&gt;&lt;/a&gt;app&lt;a style=&quot;text-decoration-line: none; font-size: 11px;&quot; href=&quot;https://ep-test.caih.com:8443/ep/app/applogin&quot;&gt;&lt;span style=&quot;color: rgb(0, 56, 132); font-size: 11px;&quot;&gt;/auth/applogin&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;/article&gt;2、配置回调地址&lt;br&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 11px; line-height: 1.75;&quot;&gt;开发环境&amp;nbsp;&lt;a style=&quot;border-color: var(--border-color); text-decoration-line: none;&quot; href=&quot;https://ep-test.caih.com:8443/ep/app/applogin&quot;&gt;https://ep-test.caih.com:8443/ep/web/epass/notice&lt;/a&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 11px; line-height: 1.75;&quot;&gt;	生产环境&amp;nbsp;&lt;a style=&quot;border-color: var(--border-color); text-decoration-line: none;&quot; href=&quot;https://ep.caih.com//ep/app/applogin&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); color: rgb(0, 56, 132);&quot;&gt;https://ep.caih.com/ep/web/epass/notice&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;" treeRoot="1" id="xr-hMLC1pA_ehJgamefP-27">
          <mxCell style="whiteSpace=wrap;html=1;align=left;treeFolding=1;treeMoving=1;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;startArrow&quot;:&quot;none&quot;,&quot;endArrow&quot;:&quot;none&quot;};" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
            <mxGeometry x="250" y="30" width="540" height="125" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;font face=&quot;Times New Roman&quot; style=&quot;font-size: 12px;&quot;&gt;在平台应用表t_gwa_application，录入应用APPID、APPKEY、APP_SECRET、TOKEN、AES_KEY、LOGIN_CALL_BACK_URL、INDEX&lt;br&gt;1、APPID、APPKEY、APP_SECRET、TOKEN、AES_KEY由教育号生成&lt;br&gt;2、LOGIN_CALL_BACK_URL 对应应用真实访问地址，租户信息使用占位符{tenant}代替&lt;/font&gt;" treeRoot="1" id="xr-hMLC1pA_ehJgamefP-28">
          <mxCell style="whiteSpace=wrap;html=1;align=left;treeFolding=1;treeMoving=1;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;startArrow&quot;:&quot;none&quot;,&quot;endArrow&quot;:&quot;none&quot;};" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
            <mxGeometry x="250" y="200" width="540" height="80" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="前置条件：完成步骤2操作，并且能拿到应用授权票据（每10分钟通过回调地址发送）&lt;br&gt;说明：&lt;br&gt;1、同意授权，会在机构永久授权表中“t_sys_pass_permanent_code”生成一条机构应用授权码记录，&lt;br&gt;如果没有授权记录，需要机构卸载重新安装。" treeRoot="1" id="xr-hMLC1pA_ehJgamefP-29">
          <mxCell style="whiteSpace=wrap;html=1;align=left;treeFolding=1;treeMoving=1;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;startArrow&quot;:&quot;none&quot;,&quot;endArrow&quot;:&quot;none&quot;};" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
            <mxGeometry x="251" y="352" width="540" height="80" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="前置条件：&lt;br&gt;1、平台已添加租户和机构映射关系记录&lt;br&gt;2、已同步机构部门和用户&lt;br&gt;说明：&lt;br&gt;1、通过应用配置的首页地址（平台后端接口）跳转&lt;br&gt;2、后端服务查询授权用户和机构、并生成真实的应用访问地址。&lt;br&gt;3、后台服务进行请求转发" treeRoot="1" id="xr-hMLC1pA_ehJgamefP-30">
          <mxCell style="whiteSpace=wrap;html=1;align=left;treeFolding=1;treeMoving=1;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;startArrow&quot;:&quot;none&quot;,&quot;endArrow&quot;:&quot;none&quot;};" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
            <mxGeometry x="250" y="500" width="520" height="120" as="geometry" />
          </mxCell>
        </UserObject>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
